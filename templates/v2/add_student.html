{% extends "v2/base2.html" %}
{% block content %}

<h1>Add Student</h1>

<form id="add-form">
    <input type="hidden" id="csrf-token" value="{{ csrf_token }}">

    <div class="mb-3">
        <label>Name</label>
        <input class="form-control" id="name" required>
    </div>

    <div class="mb-3">
        <label>Roll No</label>
        <input class="form-control" id="roll_no" required>
    </div>

    <div class="mb-3">
        <label>Class</label>
        <input class="form-control" id="s_class" required>
    </div>

    <div class="mb-3">
        <label>Email</label>
        <input class="form-control" id="email" type="email" required>
    </div>

    <button class="btn btn-success">Add Student</button>
</form>

<script>
    const csrfToken = document.getElementById("csrf-token").value;

    document.getElementById("add-form").addEventListener("submit", async (e) => {
        e.preventDefault();

        await fetch("/api/v2/students/", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": csrfToken
            },
            body: JSON.stringify({
                name: document.getElementById("name").value,
                roll_no: document.getElementById("roll_no").value,
                s_class: document.getElementById("s_class").value,
                email: document.getElementById("email").value
            })
        });

        window.location.href = "/v2/students/";
    });
</script>

{% endblock %}